= Acts As State Machine for Mongoid

It's a customized plugin from http://github.com/omghax/acts_as_state_machine that works smoothly through Mongoid.

I only removed the Class Methods that were using the method with_scope (ActiveRecord) because it's not supported in Mongoid (not a problem for me)

== Example

 class Order
   include Mongoid::Document
   include ActsAsStateMachine

   acts_as_state_machine :initial => :opened

   state :opened
   state :closed, :enter => Proc.new {|o| Mailer.send_notice(o)}
   state :returned

   event :close do
     transitions :to => :closed, :from => :opened
   end

   event :return do
     transitions :to => :returned, :from => :closed
   end
 end

 o = Order.create
 o.close! # notice is sent by mailer
 o.return!